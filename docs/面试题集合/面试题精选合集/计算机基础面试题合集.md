## 📒 计算机网络基础面试题合集

### - 进程和线程

进程是操作系统资源分配的最小单位，线程是cpu调度的最小单位。理解成一列火车（进程）的多节车厢（线程）

------

### - HTTP 的基本概念 & HTTP 是哪一层的协议并简述它的作用

#### 1.基本概念

**HTTP：超文本传输协议，从服务器传输超文本至客户端**

#### 2.哪一层及作用

**应用层协议，**

**作用：1、客户与服务器建立连接；2、客户向服务器提出请求；3、服务器接受请求，并根据请求返回相应的文件作为应答；4、客户与服务器关闭连接。**

------



### - 简述TCP/IP网络模型

> 总述：TCP/IP一共分为四层：链路层【物理层+数据链路层】，网络层，传输层，应用层【会话层+标识层+应用层】

- 链路层：负责在同一网络中进行数据帧的接收和发送。
- 网络层：负责在不同网络中进行数据包的路由的传输
- 传输层；负责在网络中进行端到端的可靠数据传输（tcp/udp）
- 应用层：负责处理和应用程序的应用和传输（http/https/dns...）

------



### - TCP和UDP的区别

#### 1. 总述

**TCP和UDP是传输层的协议，进行端到端的数据传输**

#### 2.区别：

- tcp是面向连接的，udp是面向无连接的
- tcp仅支持**单播传输**，udp支持单播、多播、广播传输
- tcp三次握手保证了连接的可靠性，udp面向无连接的，是一种不可靠的数据传输协议
- udp头部开销比tcp小，因此传输速度更快，实时性更好

#### 3.应用场景

tcp适用于对可靠性要求高的场景，如：数据传输，邮件等。udp适用于对传输可靠性要求不高，对传输速率要求高的场景，如；在线游戏，视频直播等

------



### - TCP三次握手？为什么需要三次握手？为什么需要三次握手而不是两次握手？

#### 1.简述三次握手

- 客户端向服务器发送syn包，并请求建立连接
- 服务器收到syn并向客户端发送syn+ack，并表示收到请求
- 客户端收到syn+ack并向服务器发送ack，并表示连接建立

#### 2.为什么需要三次握手而不是两次握手？

如果是两次服务器收到syn包并向客户端发送syn+ack就进入establish状态，万一发送请求途中客户端遇到网络请求接收不到，则客户端一直处于接收状态，后面服务器发送的信息客户端也收不到了

#### 3.为什么需要三次握手？

为了确定客户端和服务器的接收和发送能力，并同步序列号

------

### - TCP四次握手？为什么需要四次握手

#### 1.简述四次握手

- 客户端向服务器发送fin，请求关闭连接
- 服务器收到fin，并向客户端发送ack，表示收到关闭连接的请求
- 服务器向客户端发送fin，请求关闭连接
- 客户端收到ack，并向服务器发送fin，表示收到关闭请求

#### 2.为什么需要四次握手？

四次握手是为了确保数据的完整性和可靠性。

------

### - HTTP请求/响应的步骤

1. 客户端连接到Web服务器

2. 发送HTTP请求

3. 服务器接受请求并返回HTTP响应

4. 释放TCP连接

5. 客户端（浏览器）解析HTML内容

------

### - HTTP 的 5 种方法

- GET---获取资源
- POST---传输资源
- PUT---更新资源
- DELETE---删除资源
- HEAD---获取报文首部

------

### -  跨域相关问题

####  1.背景及概念

跨域是由**同源策略**造成的

**同源策略**：是浏览器对js实施的安全限制，只要协议/域名/端口号有一个不一样就会产生跨域问题

#### 解决跨域

- Jsonp：实际上是利用一个script标签，将数据和回调函数拼接在src的url后面
  - 缺点：只能进行get请求并且需要后端返回符合指定格式的数据
- websocket
- proxy代理
- 部署项目的时候nginx反向代理
- cors跨域资源共享，服务器配置Access-Control-Allow-Origin 为*（所有源）或允许访问的域名/ip地址，Access-Control-Allow-Method 配置请求方法，这是最为常见解决跨域的方法。
- html5新增的window.postmessage
- **document.domain**  基础域名相同 子域名不同
- **window.name** 利用在一个浏览器窗口内，载入所有的域名都是共享一个window.name

------

### http和websocket的区别

- 含义不同：
  - http：超文本传输协议
  - websocket：单个tcp连接上进行全双工通信的协议
- 连接方式不同：
  - http：浏览器发起向服务器的链接，服务器事先不知道有这个链接
  - websocket：浏览器和服务器握手建立连接
- 连接长度不同：
  - http：短连接
  - websocket：持久连接
- 连接状态不同：
  - http：无状态单向连接
  - websocket：有状态双向连接
- 协议开头不同：
  - http：http/https
  - websocket：ws/wss开头

------

### http和https区别

1. https是身披ssl协议的http协议，需要ca证书
2. 端口号不同：http：80 ； https：443
3. http传输明文，https用ssl加密传输

------

### ‼️ 浏览器的缓存机制 

浏览器与服务器通信的方式为应答模式，即是：浏览器发起HTTP请求 – 服务器响应该请求。那么浏览器第一次向服务器发起该请求后拿到请求结果，会根据响应报文中HTTP头的缓存标识，决定是否缓存结果，是则将请求结果和缓存标识存入浏览器缓存中，简单的过程如下图：

由上图我们可以知道：

-   浏览器每次发起请求，都会`先在浏览器缓存中查找该请求的结果以及缓存标识`
-   浏览器每次拿到返回的请求结果都会`将该结果和缓存标识存入浏览器缓存中`

以上两点结论就是浏览器缓存机制的关键，他确保了每个请求的缓存存入与读取，只要我们再理解浏览器缓存的使用规则，那么所有的问题就迎刃而解了。为了方便理解，这里根据是否需要向服务器重新发起HTTP请求将缓存过程分为两个部分，分别是`强制缓存`和`协商缓存`。

-   **强制缓存**

强制缓存：强制缓存指的是浏览器在请求资源时，直接从本地缓存中获取数据，而不去服务器中获取新的资源，强制缓存可以通过设置`Cache-Control`和`Expires`两个HTTP响应头来实现。

1. Cache-Control：表示资源缓存的最大有效时间，单位为秒。`max-age`指定了缓存的最大有效时间；`no-cache`表示每次都需要向服务器发送请求，验证缓存是否过期。

2. Expires：也是指定缓存的最大有效时间，但是它的值为一个绝对时间，而非一个相对时间；**在HTTP/1.1中，Cache-Control优先级高于Expires**。

-   **协商缓存**


协商缓存：协商缓存指的是浏览器在请求资源时，先向服务器发送一个请求，由服务器判断资源是否发生了变化，如果资源没有发生变化，则返回状态码304，告诉浏览器可以从本地缓存中获取数据，协商缓存可以通过设置`Last-Modified`和`ETag`两个HTTP响应头来实现。

1. Last-Modified：表示资源的**最后修改时间**。当浏览器再次请求该资源时，会将该时间发送给服务器，如果服务器判断该资源的最后修改时间仍旧是该时间，那么就认为资源没有发生变化，返回304状态码告诉浏览器可以从本地缓存中获取数据。

2. ETag：表示资源的**唯一标识符**。当浏览器再次请求该资源时，会将该标识符发送给服务器。如果服务器判断该资源的ETag值仍旧是该标识符，那么就认为资源没有发生变化，返回304状态码告诉浏览器可以从本地缓存中获取数据；ETag通常是一个哈希值，可以基于文件内容或其他因素生成。

**协商缓存与强制缓存相比，优点在于可以更精确地判断资源是否发生变化，减少了不必要的网络传输，降低了服务器的负担**

------

### 理解xss，csrf，ddos攻击原理以及避免方式

`XSS`(`Cross-Site Scripting`，**跨站脚本攻击**)是一种代码注入攻击。攻击者在目标网站上注入恶意代码，当被攻击者登陆网站时就会执行这些恶意代码，这些脚本可以读取 `cookie，session tokens`，或者其它敏感的网站信息，对用户进行钓鱼欺诈，甚至发起蠕虫攻击等。

`CSRF`（`Cross-site request forgery`）**跨站请求伪造**：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

**XSS避免方式：**

1.  `url`参数使用`encodeURIComponent`方法转义
1.  尽量不是有`InnerHtml`插入`HTML`内容
1.  使用特殊符号、标签转义符。

**`CSRF`避免方式：**

1.  添加验证码

1.  使用token

    -   服务端给用户生成一个token，加密后传递给用户
    -   用户在提交请求时，需要携带这个token
    -   服务端验证token是否正确

`DDoS`又叫分布式拒绝服务，全称 `Distributed Denial of Service`，其原理就是利用大量的请求造成资源过载，导致服务不可用。

**`DDos`避免方式：**

1.  限制单IP请求频率。
1.  防火墙等防护设置禁止`ICMP`包等
1.  检查特权端口的开放
